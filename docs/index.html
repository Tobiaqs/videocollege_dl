<!DOCTYPE html>
<html>
<head>
	<title>Bookmarklet videocollege_dl</title>
	<style>
	body {
		font-family: sans-serif;
	}

	a {
		display: inline-block;
		padding: 16px;
		background-color: #81DAF7;

		color: white;
	}
	</style>
</head>
<body>
	<!--
	Bookmarklet created via:
		1. https://babeljs.io/repl/
		2. http://dean.edwards.name/packer/
		3. https://meyerweb.com/eric/tools/dencoder/
	-->
	Drag this to your bookmarks:<br><br>
	<a href="javascript:(function()%7Bfunction%20download(d%2Ce)%7Bfetch(%22%2FMediasite%2FPlayerService%2FPlayerService.svc%2Fjson%2FGetPlayerOptions%22%2C%7Bmethod%3A%22POST%22%2Cheaders%3A%7B%22Content-Type%22%3A%22application%2Fjson%22%7D%2Cbody%3AJSON.stringify(d)%2Ccredentials%3A%22include%22%7D).then(function(a)%7Breturn%20a.json()%7D%2Cfunction(a)%7Balert(%22An%20error%20occurred.%20See%20console%20for%20details.%22)%3Bconsole.log(a)%7D).then(function(b)%7Bif(!b%7C%7C!b.d%7C%7C!b.d.Presentation%7C%7C!b.d.Presentation.Streams)%7Balert(%22Unusable%20data%20received.%20See%20console%20for%20a%20dump.%22)%3Bconsole.log(b)%3Breturn%7Dvar%20c%3Db.d.Presentation.Streams.find(function(a)%7Breturn%20a.VideoUrls.length%3E0%7D)%3Bif(!c)%7Balert(%22No%20video%20stream%20found.%22)%3Breturn%7Dif(e)%7Be(c.VideoUrls%5B0%5D.Location%2Cb.d.Presentation.Title)%7Delse%7Bvar%20a%3Ddocument.createElement(%27A%27)%3Ba.download%3Db.d.Presentation.Title%3Ba.href%3Dc.VideoUrls%5B0%5D.Location%3Bdocument.body.appendChild(a)%3Ba.click()%7D%7D)%7D%3Bif(location.pathname.indexOf(%22%2FMediasite%2FCatalog%2FFull%2F%22)%3D%3D%3D0%26%26!window._videocollege_dl_enabled)%7Bwindow._videocollege_dl_enabled%3Dtrue%3Bvar%20v%3D%7B%7D%3BsetInterval(function()%7Bvar%20n%3Ddocument.getElementById(%22SearchResultsTitle%22)%3Bif(n.children.length%3D%3D%3D0)%7Bvar%20a%3Ddocument.createElement(%27A%27)%3Ba.addEventListener(%22click%22%2Cfunction()%7Bvar%20c%3Ddocument.getElementsByClassName(%22navPanel%22)%3Bvar%20d%3D%5B%5D%3Bvar%20e%3Dtrue%3Bvar%20f%3Dfalse%3Bvar%20g%3Dundefined%3Btry%7Bfor(var%20h%3Dc%5BSymbol.iterator%5D()%2C_step%3B!(e%3D(_step%3Dh.next()).done)%3Be%3Dtrue)%7Bvar%20i%3D_step.value%3Bvar%20j%3D%5B%5D.find.call(i.children%2Cfunction(a)%7Breturn%20a.id%3D%3D%3D%22Launch%22%7D)%3Bvar%20k%3Dj.href.split(%27%2F%27).reverse()%5B0%5D%3Bif(v%5Bk%5D)%7Bd.push(v%5Bk%5D)%7D%7D%7Dcatch(err)%7Bf%3Dtrue%3Bg%3Derr%7Dfinally%7Btry%7Bif(!e%26%26h.return)%7Bh.return()%7D%7Dfinally%7Bif(f)%7Bthrow%20g%3B%7D%7D%7Dif(d.length!%3D%3Dc.length)%7Balert(%22Not%20all%20download%20links%20fetched%20for%20this%20page.%20Try%20again%20in%20a%20few%20seconds.%22)%3Breturn%7Dvar%20l%3D%27%23!%2Fbin%2Fbash%5Cn%27%3Bd.forEach(function(a)%7Bvar%20b%3Da.url.match(%2F%5C.(.%7B3%7D)%5C%3F%2F)%5B1%5D%3Bl%2B%3D%27wget%20-O%20%22%27%2Ba.title%2B%27.%27%2Bb%2B%27%22%20%22%27%2Ba.url%2B%27%22%5Cn%27%7D)%3Bvar%20a%3Ddocument.createElement(%27a%27)%3Bvar%20m%3DURL.createObjectURL(new%20Blob(%5Bl%5D%2C%7Btype%3A%22text%2Fplain%22%7D))%3Ba.href%3Dm%3Ba.download%3D%22lectures.sh%22%3Bdocument.body.appendChild(a)%3Ba.click()%3BURL.revokeObjectURL(m)%3Bdocument.body.removeChild(a)%7D)%3Ba.innerHTML%3D%22%20(wget%20script)%22%3Bn.appendChild(a)%7Dvar%20o%3Ddocument.getElementsByClassName(%22navPanel%22)%3Bvar%20p%3Dtrue%3Bvar%20q%3Dfalse%3Bvar%20r%3Dundefined%3Btry%7Bvar%20s%3Dfunction%20s()%7Bvar%20d%3D_step2.value%3Bvar%20e%3D%5B%5D.some.call(d%2Cfunction(a)%7Breturn%20a.id%3D%3D%3D%22Download%22%7D)%3Bif(!e%26%26!d.getAttribute(%22data-fetched%22))%7Bvar%20f%3Dfunction%20f(b%2Cc)%7Bif(!v%5Bh%5D)%7Bv%5Bh%5D%3D%7Burl%3Ab%2Ctitle%3Ac%7D%7Dvar%20a%3Ddocument.createElement(%22A%22)%3Ba.href%3Db%3Ba.innerHTML%3D%22Download%22%3Ba.download%3Dc%3Ba.target%3D%22_blank%22%3Ba.id%3D%22Download%22%3Bd.appendChild(a)%7D%3Bd.setAttribute(%22data-fetched%22%2C%22yes%22)%3Bvar%20g%3D%5B%5D.find.call(d.children%2Cfunction(a)%7Breturn%20a.id%3D%3D%3D%22Launch%22%7D)%3Bvar%20h%3Dg.href.split(%27%2F%27).reverse()%5B0%5D%3Bvar%20i%3Dh.match(%2F%5C%3Fcatalog%3D(%5B%5E%26%5D%2B)%2F)%5B1%5D%3Bif(v%5Bh%5D)%7Bf(v%5Bh%5D.url%2Cv%5Bh%5D.title)%3Breturn%22continue%22%7Dvar%20j%3D%7BgetPlayerOptionsRequest%3A%7BResourceId%3Ah.split(%27%3F%27)%5B0%5D%2CQueryString%3Ai%2CUseScreenReader%3Afalse%2CUrlReferrer%3Alocation.href%7D%7D%3Bdownload(j%2Cf)%7D%7D%3Bfor(var%20t%3Do%5BSymbol.iterator%5D()%2C_step2%3B!(p%3D(_step2%3Dt.next()).done)%3Bp%3Dtrue)%7Bvar%20u%3Ds()%3Bif(u%3D%3D%3D%22continue%22)continue%7D%7Dcatch(err)%7Bq%3Dtrue%3Br%3Derr%7Dfinally%7Btry%7Bif(!p%26%26t.return)%7Bt.return()%7D%7Dfinally%7Bif(q)%7Bthrow%20r%3B%7D%7D%7D%7D%2C1000)%7Delse%20if(location.pathname.indexOf(%22%2FMediasite%2FPlay%2F%22))%7Bvar%20w%3D%7BgetPlayerOptionsRequest%3A%7BResourceId%3Alocation.pathname.split(%27%2F%27).reverse()%5B0%5D%2CQueryString%3Alocation.search%2CUseScreenReader%3Afalse%2CUrlReferrer%3Adocument.referrer%7D%7D%3Bdownload(w)%7D%7D)()%3B">Videocollege DL</a>
</body>
</html>
