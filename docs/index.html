<!DOCTYPE html>
<html>
<head>
	<title>Bookmarklet videocollege_dl</title>
	<style>
	body {
		font-family: sans-serif;
	}

	a {
		display: inline-block;
		padding: 16px;
		background-color: #81DAF7;

		color: white;
	}
	</style>
</head>
<body>
	<!--
	Bookmarklet created via:
		1. https://babeljs.io/repl/
		2. http://dean.edwards.name/packer/
		3. https://meyerweb.com/eric/tools/dencoder/
	-->
	Drag this to your bookmarks:<br><br>
	<a href="javascript:(function(){function%20download(d,e){fetch("/Mediasite/PlayerService/PlayerService.svc/json/GetPlayerOptions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d),credentials:"include"}).then(function(a){return%20a.json()},function(a){alert("An%20error%20occurred.%20See%20console%20for%20details.");console.log(a)}).then(function(b){if(!b||!b.d||!b.d.Presentation||!b.d.Presentation.Streams){alert("Unusable%20data%20received.%20See%20console%20for%20a%20dump.");console.log(b);return}var%20c=b.d.Presentation.Streams.find(function(a){return%20a.VideoUrls.length>0});if(!c){alert("No%20video%20stream%20found.");return}if(e){e(c.VideoUrls[0].Location,b.d.Presentation.Title)}else{var%20a=document.createElement('A');a.download=b.d.Presentation.Title;a.href=c.VideoUrls[0].Location;document.body.appendChild(a);a.click()}})};if(location.pathname.indexOf("/Mediasite/Catalog/Full/")===0&&!window._videocollege_dl_enabled){window._videocollege_dl_enabled=true;var%20u={};setInterval(function(){var%20m=document.getElementById("SearchResultsTitle");if(m.children.length===0){var%20a=document.createElement('A');a.addEventListener("click",function(){var%20c=document.getElementsByClassName("navPanel");var%20d=[];var%20e=true;var%20f=false;var%20g=undefined;try{for(var%20h=c[Symbol.iterator](),_step;!(e=(_step=h.next()).done);e=true){var%20i=_step.value;var%20j=i.children[1].href.split('/').reverse()[0];if(u[j]){d.push(u[j])}}}catch(err){f=true;g=err}finally{try{if(!e&&h.return){h.return()}}finally{if(f){throw%20g;}}}if(d.length!==c.length){alert("Not%20all%20download%20links%20fetched%20for%20this%20page.%20Try%20again%20in%20a%20few%20seconds.");return}var%20k='#!/bin/bash\n';d.forEach(function(a){var%20b=a.url.match(/\.(.{3})\?/)[1];k+='wget%20-O%20"'+a.title+'.'+b+'"%20"'+a.url+'"\n'});var%20a=document.createElement('a');var%20l=URL.createObjectURL(new%20Blob([k],{type:"text/plain"}));a.href=l;a.download="lectures.sh";document.body.appendChild(a);a.click();URL.revokeObjectURL(l);document.body.removeChild(a)});a.innerHTML="%20(wget%20script)";m.appendChild(a)}var%20n=document.getElementsByClassName("navPanel");var%20o=true;var%20p=false;var%20q=undefined;try{var%20r=function%20r(){var%20d=_step2.value;if(d.children.length===2&&!d.getAttribute("data-fetched")){var%20e=function%20e(b,c){if(!u[f]){u[f]={url:b,title:c}}var%20a=document.createElement("A");a.href=b;a.innerHTML="Download";a.download=c;a.target="_blank";d.appendChild(a)};d.setAttribute("data-fetched","yes");var%20f=d.children[1].href.split('/').reverse()[0];var%20g=f.match(/\?catalog=([^&]+)/)[1];if(u[f]){e(u[f].url,u[f].title);return"continue"}var%20h={getPlayerOptionsRequest:{ResourceId:f.split('?')[0],QueryString:g,UseScreenReader:false,UrlReferrer:location.href}};download(h,e)}};for(var%20s=n[Symbol.iterator](),_step2;!(o=(_step2=s.next()).done);o=true){var%20t=r();if(t==="continue")continue}}catch(err){p=true;q=err}finally{try{if(!o&&s.return){s.return()}}finally{if(p){throw%20q;}}}},1000)}else%20if(location.pathname.indexOf("/Mediasite/Play/")){var%20v={getPlayerOptionsRequest:{ResourceId:location.pathname.split('/').reverse()[0],QueryString:location.search,UseScreenReader:false,UrlReferrer:document.referrer}};download(v)}})();">Videocollege DL</a>
</body>
</html>
