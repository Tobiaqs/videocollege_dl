<!DOCTYPE html>
<html>
<head>
	<title>Bookmarklet videocollege_dl</title>
	<style>
	body {
		font-family: sans-serif;
	}

	a {
		display: inline-block;
		padding: 16px;
		background-color: #81DAF7;

		color: white;
	}
	</style>
</head>
<body>
	<!--
	Bookmarklet created via:
		1. https://babeljs.io/repl/
		2. http://dean.edwards.name/packer/
		3. https://meyerweb.com/eric/tools/dencoder/
	-->
	Drag this to your bookmarks:<br><br>
	<a href="javascript:(function()%7Bfunction%20download(payload%2Ccallback)%7Bfetch(%22%2FMediasite%2FPlayerService%2FPlayerService.svc%2Fjson%2FGetPlayerOptions%22%2C%7Bmethod%3A%22POST%22%2Cheaders%3A%7B%22Content-Type%22%3A%22application%2Fjson%22%7D%2Cbody%3AJSON.stringify(payload)%2Ccredentials%3A%22include%22%7D).then(function(response)%7Breturn%20response.json()%7D%2Cfunction(error)%7Balert(%22An%20error%20occurred.%20See%20console%20for%20details.%22)%3Bconsole.log(error)%7D).then(function(json)%7Bif(!json%7C%7C!json.d%7C%7C!json.d.Presentation%7C%7C!json.d.Presentation.Streams)%7Balert(%22Unusable%20data%20received.%20See%20console%20for%20a%20dump.%22)%3Bconsole.log(json)%3Breturn%7Dvar%20stream%3Djson.d.Presentation.Streams.find(function(stream)%7Breturn%20stream.VideoUrls.length%3E0%7D)%3Bif(!stream)%7Balert(%22No%20video%20stream%20found.%22)%3Breturn%7Dif(callback)%7Bcallback(stream.VideoUrls%5B0%5D.Location%2Cjson.d.Presentation.Title)%7Delse%7Bvar%20a%3Ddocument.createElement(%27A%27)%3Ba.download%3Djson.d.Presentation.Title%3Ba.href%3Dstream.VideoUrls%5B0%5D.Location%3Bdocument.body.appendChild(a)%3Ba.click()%7D%7D)%7D%3Bif(location.pathname.indexOf(%22%2FMediasite%2FCatalog%2FFull%2F%22)%3D%3D%3D0%26%26!window._videocollege_dl_enabled)%7Bwindow._videocollege_dl_enabled%3Dtrue%3Bvar%20cache%3D%7B%7D%3BsetInterval(function()%7Bvar%20title%3Ddocument.getElementById(%22SearchResultsTitle%22)%3Bif(title.children.length%3D%3D%3D0)%7Bvar%20a%3Ddocument.createElement(%27A%27)%3Ba.addEventListener(%22click%22%2Cfunction()%7Bvar%20elements%3Ddocument.getElementsByClassName(%22navPanel%22)%3Bvar%20descriptors%3D%5B%5D%3Bvar%20_iteratorNormalCompletion%3Dtrue%3Bvar%20_didIteratorError%3Dfalse%3Bvar%20_iteratorError%3Dundefined%3Btry%7Bfor(var%20_iterator%3Delements%5BSymbol.iterator%5D()%2C_step%3B!(_iteratorNormalCompletion%3D(_step%3D_iterator.next()).done)%3B_iteratorNormalCompletion%3Dtrue)%7Bvar%20element%3D_step.value%3Bvar%20path%3Delement.children%5B1%5D.href.split(%27%2F%27).reverse()%5B0%5D%3Bif(cache%5Bpath%5D)%7Bdescriptors.push(cache%5Bpath%5D)%7D%7D%7Dcatch(err)%7B_didIteratorError%3Dtrue%3B_iteratorError%3Derr%7Dfinally%7Btry%7Bif(!_iteratorNormalCompletion%26%26_iterator.return)%7B_iterator.return()%7D%7Dfinally%7Bif(_didIteratorError)%7Bthrow%20_iteratorError%3B%7D%7D%7Dif(descriptors.length!%3D%3Delements.length)%7Balert(%22Not%20all%20download%20links%20fetched%20for%20this%20page.%20Try%20again%20in%20a%20few%20seconds.%22)%3Breturn%7Dvar%20script%3D%27%23!%2Fbin%2Fbash%5Cn%27%3Bdescriptors.forEach(function(descriptor)%7Bvar%20ext%3Ddescriptor.url.match(%2F%5C.(.%7B3%7D)%5C%3F%2F)%5B1%5D%3Bscript%2B%3D%27wget%20-O%20%22%27%2Bdescriptor.title%2B%27.%27%2Bext%2B%27%22%20%22%27%2Bdescriptor.url%2B%27%22%5Cn%27%7D)%3Bvar%20a%3Ddocument.createElement(%27a%27)%3Bvar%20objectURL%3DURL.createObjectURL(new%20Blob(%5Bscript%5D%2C%7Btype%3A%22text%2Fplain%22%7D))%3Ba.href%3DobjectURL%3Ba.download%3D%22lectures.sh%22%3Bdocument.body.appendChild(a)%3Ba.click()%3BURL.revokeObjectURL(objectURL)%3Bdocument.body.removeChild(a)%7D)%3Ba.innerHTML%3D%22%20(wget%20script)%22%3Btitle.appendChild(a)%7Dvar%20elements%3Ddocument.getElementsByClassName(%22navPanel%22)%3Bvar%20_iteratorNormalCompletion2%3Dtrue%3Bvar%20_didIteratorError2%3Dfalse%3Bvar%20_iteratorError2%3Dundefined%3Btry%7Bvar%20_loop%3Dfunction%20_loop()%7Bvar%20element%3D_step2.value%3Bif(element.children.length%3D%3D%3D2%26%26!element.getAttribute(%22data-fetched%22))%7Bvar%20_createDownloadLink%3Dfunction%20_createDownloadLink(url%2Ctitle)%7Bif(!cache%5Bpath%5D)%7Bcache%5Bpath%5D%3D%7Burl%3Aurl%2Ctitle%3Atitle%7D%7Dvar%20a%3Ddocument.createElement(%22A%22)%3Ba.href%3Durl%3Ba.innerHTML%3D%22Download%22%3Ba.download%3Dtitle%3Ba.target%3D%22_blank%22%3Belement.appendChild(a)%7D%3Belement.setAttribute(%22data-fetched%22%2C%22yes%22)%3Bvar%20path%3Delement.children%5B1%5D.href.split(%27%2F%27).reverse()%5B0%5D%3Bvar%20queryString%3Dpath.match(%2F%5C%3Fcatalog%3D(%5B%5E%26%5D%2B)%2F)%5B1%5D%3Bif(cache%5Bpath%5D)%7B_createDownloadLink(cache%5Bpath%5D.url%2Ccache%5Bpath%5D.title)%3Breturn%22continue%22%7Dvar%20payload%3D%7BgetPlayerOptionsRequest%3A%7BResourceId%3Apath.split(%27%3F%27)%5B0%5D%2CQueryString%3AqueryString%2CUseScreenReader%3Afalse%2CUrlReferrer%3Alocation.href%7D%7D%3Bdownload(payload%2C_createDownloadLink)%7D%7D%3Bfor(var%20_iterator2%3Delements%5BSymbol.iterator%5D()%2C_step2%3B!(_iteratorNormalCompletion2%3D(_step2%3D_iterator2.next()).done)%3B_iteratorNormalCompletion2%3Dtrue)%7Bvar%20_ret%3D_loop()%3Bif(_ret%3D%3D%3D%22continue%22)continue%7D%7Dcatch(err)%7B_didIteratorError2%3Dtrue%3B_iteratorError2%3Derr%7Dfinally%7Btry%7Bif(!_iteratorNormalCompletion2%26%26_iterator2.return)%7B_iterator2.return()%7D%7Dfinally%7Bif(_didIteratorError2)%7Bthrow%20_iteratorError2%3B%7D%7D%7D%7D%2C1000)%7Delse%20if(location.pathname.indexOf(%22%2FMediasite%2FPlay%2F%22))%7Bvar%20payload%3D%7BgetPlayerOptionsRequest%3A%7BResourceId%3Alocation.pathname.split(%27%2F%27).reverse()%5B0%5D%2CQueryString%3Alocation.search%2CUseScreenReader%3Afalse%2CUrlReferrer%3Adocument.referrer%7D%7D%3Bdownload(payload)%7D%7D)()%3B">Videocollege DL</a>
</body>
</html>
