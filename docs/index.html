<!DOCTYPE html>
<html>
<head>
	<title>Bookmarklet videocollege_dl</title>
	<style>
	body {
		font-family: sans-serif;
	}

	a {
		display: inline-block;
		padding: 16px;
		background-color: #81DAF7;

		color: white;
	}
	</style>
</head>
<body>
	<!-- Bookmarklet created via http://mrcoles.com/bookmarklet/ -->
	Drag this to your bookmarks:<br><br>
	<a href="javascript:(function()%7B(function%20()%20%7Bfunction%20download%20(payload)%20%7Bfetch(%22%2FMediasite%2FPlayerService%2FPlayerService.svc%2Fjson%2FGetPlayerOptions%22%2C%20%7Bmethod%3A%20%22POST%22%2Cheaders%3A%20%7B%22Content-Type%22%3A%20%22application%2Fjson%22%7D%2Cbody%3A%20JSON.stringify(payload)%2Ccredentials%3A%20%22include%22%7D).then((response)%20%3D%3E%20%7Breturn%20response.json()%3B%7D%2C%20(error)%20%3D%3E%20%7Balert(%22An%20error%20occurred.%20See%20console%20for%20details.%22)%3Bconsole.log(error)%3B%7D).then((json)%20%3D%3E%20%7Bif%20(!json%20%7C%7C%20!json.d%20%7C%7C%20!json.d.Presentation%20%7C%7C%20!json.d.Presentation.Streams)%20%7Balert(%22Unusable%20data%20received.%20See%20console%20for%20a%20dump.%22)%3Bconsole.log(json)%3Breturn%3B%7Dlet%20stream%20%3D%20json.d.Presentation.Streams.find((stream)%20%3D%3E%20%7Breturn%20stream.VideoUrls.length%20%3E%200%3B%7D)%3Bif%20(!stream)%20%7Balert(%22No%20video%20stream%20found.%22)%3Breturn%3B%7Dlet%20a%20%3D%20document.createElement('A')%3Ba.download%20%3D%20json.d.Presentation.Title%3Ba.href%20%3D%20stream.VideoUrls%5B0%5D.Location%3Bdocument.body.appendChild(a)%3Ba.click()%3B%7D)%3B%7D%3Bif%20(location.pathname.indexOf(%22%2FMediasite%2FCatalog%2FFull%2F%22)%20%3D%3D%3D%200%20%26%26%20!window._videocollege_dl_enabled)%20%7Bwindow._videocollege_dl_enabled%20%3D%20true%3Bdocument.body.addEventListener(%22click%22%2C%20(event)%20%3D%3E%20%7Bif%20(event.target.classList.contains(%22titleLink%22))%20%7Bevent.preventDefault()%3Blet%20path%20%3D%20event.target.href.split('%2F').reverse()%5B0%5D%3Blet%20queryString%20%3D%20path.match(%2F%5C%3Fcatalog%3D(%5B%5E%26%5D%2B)%2F)%5B1%5D%3Blet%20payload%20%3D%20%7BgetPlayerOptionsRequest%3A%20%7BResourceId%3A%20path.split('%3F')%5B0%5D%2CQueryString%3A%20queryString%2CUseScreenReader%3A%20false%2CUrlReferrer%3A%20location.href%7D%7D%3Bdownload(payload)%3B%7D%7D)%3B%7D%20else%20if%20(location.pathname.indexOf(%22%2FMediasite%2FPlay%2F%22))%20%7Blet%20payload%20%3D%20%7BgetPlayerOptionsRequest%3A%20%7BResourceId%3A%20location.pathname.split('%2F').reverse()%5B0%5D%2CQueryString%3A%20location.search%2CUseScreenReader%3A%20false%2CUrlReferrer%3A%20document.referrer%7D%7D%3Bdownload(payload)%3B%7D%7D)()%7D)()">Videocollege DL</a>
	<br><br>
	See a demo:
	<br><br>
	<video src="demo.ogv" controls></video>
</body>
</html>
